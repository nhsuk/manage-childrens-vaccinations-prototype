{% set rootPath = "/vaccination/" %}
{% set index = 0 %}
{% if 3in1Vaccination %}
  {% set rootPath = "/3-in-1-vaccination/" %}
{% elseif menACWYVaccination %}
  {% set rootPath = "/men-acwy-vaccination/" %}
  {% set index = 1 %}
{% endif %}
{% set batch = data.vaccines.batches[vaccination.batch] %}
{% set vaccineGiven = vaccination.outcome == VACCINATION_OUTCOME.VACCINATED %}
{% set basePath = rootPath + campaign.id + "/" + patient.nhsNumber %}

{{ summaryList({
  rows: decorateRows([
    {
      key: "Child",
      value: patient.fullName
    },
    {
      key: "Vaccine",
      value: batch.vaccine
    } if vaccineGiven,
    {
      key: "Dose",
      value: "1 of 2",
      href: "#"
    } if vaccineGiven and type == "HPV",
    {
      key: "Brand",
      value: batch.brand + " (" + batch.method + ")",
      href: "#"
    } if vaccineGiven,
    {
      key: "Batch",
      value: batch.name + " (expires " + (batch.expiryDate | govukDate("truncate")) + ")",
      href: "#"
    } if vaccineGiven,
    {
      key: "Site",
      value: vaccination.site,
      href: basePath + "/has-it-been-given"
    }  if vaccineGiven and vaccination.site,
    {
      key: "Outcome",
      value: vaccination.outcome,
      href: basePath + "/not-given" if not vaccineGiven
    },
    {
      key: "Date",
      value: "Today (" + "today" | govukDate + ")",
      href: "#"
    },
    {
      key: "Time",
      value: "now" | govukTime,
      href: "#"
    } if vaccineGiven,
    {
      key: "Location",
      value: campaign.location,
      href: "#"
    },
    {
      key: "Vaccinator",
      value: "You (" + data.user.fullName + ")",
      href: "#"
    }
  ])
}) }}

{% set rootPath = '/vaccination/' %}
{% set index = 0 %}
{% if 3in1VaccinationRecord %}
  {% set rootPath = '/3-in-1-vaccination/' %}
{% elseif menACWYVaccinationRecord %}
  {% set rootPath = '/men-acwy-vaccination/' %}
  {% set index = 1 %}
{% endif %}
{% set vaccine = campaign.vaccines[index] %}
{% set batch = vaccine.batches[0] %}
{% set brand = vaccine.brand + ' (Nasal spray)' if vaccine.isNasal else vaccine.brand + ' (Injection)' %}
{% set vaccineGiven = vaccinationRecord['given'] !== 'No' %}
{% set basePath = rootPath + campaign.id + '/' + child.nhsNumber %}

{{ govukSummaryList({
  classes: "app-u-frutiger app-summary-list--no-bottom-border",
  rows: decorateRows([
    {
      key: 'Child',
      value: child.fullName
    },
    {
      key: "Vaccine",
      value: vaccine.vaccine
    },
    {
      key: "Dose",
      value: "1 of 2",
      href: "#"
    } if type == "HPV",
    {
      key: "Brand",
      value: brand,
      href: "#"
    },
    {
      key: "Batch",
      value: batch.name + ' (expires ' + (batch.expiry | govukDate('truncate')) + ')',
      href: "#"
    },
    {
      key: 'Site',
      value: 'Nasal'
    } if vaccineGiven and vaccine.isNasal,
    {
      key: 'Site',
      value: vaccinationRecord.where,
      href: basePath + '/has-it-been-given'
    } if vaccineGiven and not vaccine.isNasal,
    {
      key: 'Reason',
      value: vaccinationRecord['why-not-given'],
      href: basePath + '/not-given'
    } if not vaccineGiven,
    {
      key: 'Date',
      value: 'Today (' + "today" | govukDate + ')',
      href: '#'
    },
    {
      key: 'Time',
      value: 'now' | govukTime,
      href: '#'
    } if vaccineGiven,
    {
      key: 'Location',
      value: campaign.location,
      href: '#'
    },
    {
      key: 'Vaccinator',
      value: 'You (' + data.user.name + ')',
      href: '#'
    }
  ])
}) }}
